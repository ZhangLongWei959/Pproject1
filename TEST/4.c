private  int pattern(StringBuffer sb)